(function(t){function e(e){for(var i,s,a=e[0],l=e[1],c=e[2],f=0,p=[];f<a.length;f++)s=a[f],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(i=!1)}i&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},r={app:0},o=[];function s(t){return a.p+"js/"+({about:"about"}[t]||t)+"."+{about:"a43cbcf2"}[t]+".js"}function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise((function(e,i){n=r[t]=[e,i]}));e.push(n[2]=i);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=s(t);var c=new Error;o=function(e){l.onerror=l.onload=null,clearTimeout(f);var n=r[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",c.name="ChunkLoadError",c.type=i,c.request=o,n[1](c)}r[t]=void 0}};var f=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(e)},a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var f=0;f<l.length;f++)e(l[f]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"034f":function(t,e,n){"use strict";var i=n("85ec"),r=n.n(i);r.a},"1be3":function(t,e,n){},"1f7a":function(t,e,n){t.exports=n.p+"img/brush.71f634cc.png"},"4ea7":function(t,e,n){t.exports=n.p+"img/pallet.19fdd25d.png"},"702c":function(t,e,n){t.exports=n.p+"img/tip.c870fbfd.png"},"71a4":function(t,e,n){"use strict";var i=n("1be3"),r=n.n(i);r.a},"85ec":function(t,e,n){},ac15:function(t,e,n){"use strict";var i=n("ed4d"),r=n.n(i);r.a},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{ref:"cap",attrs:{id:"cap"}}),i("div",{ref:"brush",attrs:{id:"brush"}},[i("canvas",{ref:"tip",staticStyle:{left:"0px",position:"absolute","z-index":"9994"},attrs:{width:"26",height:"19"}}),i("img",{ref:"tipBG",staticStyle:{left:"0px",position:"absolute","z-index":"9993"},attrs:{src:n("702c"),id:"tip"}}),i("img",{staticStyle:{left:"25px",position:"absolute"},attrs:{src:n("1f7a")}}),i("div",{attrs:{id:"sleeve"}})]),i("div",{attrs:{id:"container"}},[i("div",{attrs:{id:"middle"}},[i("div",{ref:"refImg",attrs:{id:"refImg"}}),i("div",{attrs:{id:"menu"}},[i("a",{attrs:{href:"#"},on:{click:t.save}},[t._v("Save")]),i("a",{attrs:{href:"#"},on:{click:function(e){return t.$refs.paintCan.clearAll()}}},[t._v("Clear")]),i("a",{attrs:{href:"#"},on:{click:function(e){t.timelineShow=!t.timelineShow}}},[t._v("Timeline")]),i("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.load}}),i("a",{staticStyle:{"border-radius":"0px 0px 15px 0px"},attrs:{href:"#"},on:{click:function(e){return t.$refs.file.click()}}},[t._v("Load")]),i("BTimeline",{directives:[{name:"show",rawName:"v-show",value:t.timelineShow,expression:"timelineShow"}]})],1),i("div",{ref:"canContainer",attrs:{id:"canvasContainer"}},[i("img",{staticStyle:{position:"absolute","z-index":"9995"},attrs:{src:n("ea91")}}),i("BCan",{ref:"paintCan",attrs:{id:"paintCan",lineColor:t.lineColor,curPos:t.curPos,color:t.color}})],1),i("div",{attrs:{id:"pallet"}},[i("div",{staticStyle:{"z-index":"9998",position:"absolute",top:"-5px",left:"-100px"},on:{click:t.toggleColor}},[t._v(" Fill "),i("div",{staticClass:"colPrev",class:{cur:"bg"==t.selected}},[i("span",{directives:[{name:"show",rawName:"v-show",value:!t.color,expression:"!color"}],staticClass:"X"},[t._v("X")]),i("div",{style:{backgroundColor:"#"+t.color}})])]),i("div",{staticStyle:{"z-index":"9998",position:"absolute",top:"-5px",right:"-100px"},on:{click:t.toggleLine}},[t._v(" Stroke "),i("div",{staticClass:"colPrev",class:{cur:"line"==t.selected}},[i("span",{directives:[{name:"show",rawName:"v-show",value:!t.lineColor,expression:"!lineColor"}],staticClass:"X"},[t._v("X")]),i("div",{style:{backgroundColor:"#"+t.lineColor}})])]),i("div",{ref:"pallet",staticStyle:{display:"flex",width:"100%",position:"absolute",height:"100%"}},t._l(t.colors,(function(e,n){return i("div",{key:n,staticClass:"palletCol",on:{click:function(n){return t.changeColor(e)}}})})),0),i("img",{ref:"palletImg",attrs:{src:n("4ea7")}})])])])])},o=[],s=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{position:"relative",height:"420px",width:"420px"}},t._l(2,(function(t,e){return n("canvas",{key:e,ref:"can",refInFor:!0,attrs:{width:"420",height:"420"}})})),0)}),a=[],l=(n("cb29"),n("4160"),n("159b"),new i["a"]),c=l,f={name:"BCan",props:{curPos:{type:Object,default:function(){return null}},lineColor:{type:String,default:null},color:{type:String,default:"000000"}},data:function(){return{points:[],strokes:[],frames:[],curFrame:null,frameNum:0}},watch:{curPos:{deep:!0,handler:function(t){this.clear(1),(this.color||this.lineColor)&&(t?(this.points.push(t),this.drawStroke(1,this.points,this.color,this.lineColor)):(this.drawStroke(0,this.points,this.color,this.lineColor),this.points=[]))}}},methods:{clearAll:function(){for(var t in this.frames=[],this.strokes=[],this.$refs.can)this.clear(t)},clear:function(t){var e=this.$refs.can[t];e.getContext("2d").clearRect(0,0,e.width,e.height)},save:function(){},drawFrame:function(t){var e=this;this.frames[t]&&this.frames[t].forEach((function(t){e.draw(0,t)}))},drawStroke:function(t,e,n,i){var r=this.$refs.can[t].getContext("2d");i&&(r.strokeStyle="#"+i),n&&(r.fillStyle="#"+n),1==t&&(r.globalCompositeOperation="xor"),e&&(r.beginPath(),r.moveTo(e[0].x,e[0].y),e.forEach((function(t,e){r.lineTo(t.x,t.y)})),r.lineWidth=3,n&&(r.fill(),i||r.closePath()),i&&r.stroke())},draw:function(t,e){var n=this,i=this.$refs.can[t].getContext("2d");0==t&&this.clear(0),e.forEach((function(e,r){n.drawStroke(i,t,e.stroke,e.color,e.lineColor)}))},frameChange:function(t){if(this.clearAll(),this.points.length){var e=this.points.shift();this.points=[e]}}},mounted:function(){c.$on("frameChange",this.frameChange)}},u=f,p=(n("ac15"),n("2877")),d=Object(p["a"])(u,s,a,!1,null,"6cfb87b2",null),h=d.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("span",{attrs:{id:"playBtn"},on:{click:t.togglePlay}},[t._v(t._s(t.playing?"stop":"play"))]),n("span",{staticStyle:{display:"inline-block","margin-right":"10px"}},[t._v("frame: "+t._s(t.frameNum))]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.frameNum,expression:"frameNum"}],staticStyle:{width:"40px"},attrs:{type:"range",max:t.frameMax},domProps:{value:t.frameNum},on:{__r:function(e){t.frameNum=e.target.value}}}),n("span",{staticStyle:{display:"inline-block",margin:"0px 10px"}},[t._v("speed: "+t._s(t.speed/1e3))]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.speed,expression:"speed"}],staticStyle:{width:"40px"},attrs:{type:"range",max:"1000",min:"10",step:"10"},domProps:{value:t.speed},on:{__r:function(e){t.speed=e.target.value}}})])},v=[],g={name:"BCan",data:function(){return{speed:100,frameNum:0,frameMax:3,playing:!1}},watch:{frameNum:function(t){c.$emit("frameChange",t)}},methods:{tick:function(){var t=this;setTimeout((function(){t.playing&&(window.requestAnimationFrame(t.tick),t.frameNum<t.frameMax?t.frameNum++:t.frameNum=0)}),this.speed)},togglePlay:function(){this.playing=!this.playing,this.playing&&this.startTick()},startTick:function(){window.requestAnimationFrame(this.tick)}},mounted:function(){var t=this;document.addEventListener("keydown",(function(e){32==e.which&&t.togglePlay()})),this.$nextTick((function(){t.startTick()}))}},y=g,b=(n("71a4"),Object(p["a"])(y,m,v,!1,null,"36b9ea88",null)),x=b.exports,w=n("cffa"),C={name:"App",components:{BCan:h,BTimeline:x},data:function(){return{coloring:!1,color:"000000",lineColor:null,selected:"bg",timelineShow:!0,palletShow:!1,refOpen:!1,curPos:null,md:!1,tipImg:null,armShow:!0,colors:["000000","FFFFFF","F2B7D6","E91D3B","FDBC24","45B5F1","A776EE","58E8A4","162770","5A2F1C","F7EB3D","C7C6C7","115011","380E74"]}},watch:{color:function(t){this.tipChange()}},methods:{changeColor:function(t){"bg"==this.selected?this.color=t:"line"==this.selected&&(this.lineColor=t)},toggleColor:function(){"bg"==this.selected&&(this.color?this.color=null:this.color="000000"),this.selected="bg"},toggleLine:function(){"line"==this.selected&&(this.lineColor?(this.lineColor=null,console.log("test")):this.lineColor="000000"),this.selected="line"},save:function(){},camera:function(){navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(t){})).catch((function(t){}))},load:function(t){var e=this,n=t.target.files,i=URL.createObjectURL(n[0]),r=0;this.refOpen&&(r=1.5,w["a"].to("#refImg",1,{top:-230})),setTimeout((function(){e.$refs.refImg.style.backgroundImage="url("+i+")"}),1e3*r),w["a"].to("#refImg",1,{top:10,delay:r}),this.refOpen=!0},tipChange:function(){var t=this.$refs.tip.getContext("2d");t.drawImage(this.tipImg,0,0),t.fillStyle="#"+this.color,t.globalCompositeOperation="source-in",t.fillRect(0,0,14,14)}},mounted:function(){var t,e=this;this.$nextTick((function(){e.tipImg=document.getElementById("tip"),e.tipImg.onload=function(){e.tipChange()},e.$refs.canContainer.style.marginTop=window.innerHeight/2-250+"px",t=e.$refs.paintCan.$el.getBoundingClientRect()})),this.$refs.pallet.addEventListener("pointerdown",(function(t){e.$refs.brush.style.bottom="40px"})),this.$refs.pallet.addEventListener("pointerup",(function(t){e.$refs.brush.style.bottom="75px"})),this.$refs.pallet.addEventListener("pointermove",(function(t){e.$refs.brush.style.width=window.innerWidth-t.screenX+"px",t.pressure||(e.$refs.brush.style.left=t.screenX-8+"px")})),this.$refs.cap.addEventListener("pointerup",(function(t){e.md=!1})),this.$refs.cap.addEventListener("pointerdown",(function(t){e.md=!0})),this.$refs.cap.addEventListener("pointermove",(function(n){e.$refs.brush.style.width=window.innerWidth-n.offsetX+"px";var i=n.screenY+"px";if(n.offsetX>t.x-50&&n.offsetX<t.x+t.width+50&&n.offsetY>t.y&&n.offsetY-50<t.y+t.height+20)if(e.md){var r=Math.round(n.offsetX-t.x),o=Math.round(n.offsetY-t.y);e.curPos={x:r,y:o},e.$refs.tipBG.style.top="-4px",e.$refs.tipBG.style.left="6px",e.$refs.tipBG.style.transform="scaleX(-1) rotate(90deg)",e.$refs.tip.style.top="-4px",e.$refs.tip.style.left="6px",e.$refs.tip.style.transform="scaleX(-1) rotate(90deg)"}else e.$refs.tipBG.style.top="0px",e.$refs.tipBG.style.left="0px",e.$refs.tipBG.style.transform="rotate(0deg)",e.$refs.tip.style.top="0px",e.$refs.tip.style.left="0px",e.$refs.tip.style.transform="rotate(0deg)",e.curPos=null;else e.md=!1;n.offsetY>window.innerHeight-80&&!e.palletShow?(e.palletShow=!0,w["a"].to("#pallet",{bottom:-5}),i=n.offsetY-45,e.$refs.brush.style.transform="scaleY(-1)"):n.offsetY<window.innerHeight-79&&(w["a"].to("#pallet",{bottom:-65}),i=n.offsetY,e.$refs.brush.style.transform="scaleY(1)",e.palletShow=!1),e.$refs.brush.style.top=i+"px",e.$refs.brush.style.left=n.offsetX-15+"px"}))}},$=C,k=(n("034f"),Object(p["a"])($,r,o,!1,null,null,null)),S=k.exports,_=n("8c4f"),E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("div",{ref:"hand",staticStyle:{"background-color":"#F00",right:"0px",height:"120px",position:"absolute"}}),n("BCan")],1)},P=[],B={name:"Home",components:{BCan:h},mounted:function(){var t=this;window.addEventListener("mousemove",(function(e){t.$refs.hand.style.width=window.innerWidth-e.offsetX-40+"px",t.$refs.hand.style.top=e.offsetY+"px"}))}},O=B,F=Object(p["a"])(O,E,P,!1,null,null,null),T=F.exports;i["a"].use(_["a"]);var j=[{path:"/",name:"Home",component:T},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],N=new _["a"]({base:"",routes:j}),L=N;i["a"].config.productionTip=!1,new i["a"]({router:L,render:function(t){return t(S)}}).$mount("#app")},ea91:function(t,e,n){t.exports=n.p+"img/canvas.c0fbad0b.png"},ed4d:function(t,e,n){}});
//# sourceMappingURL=app.681228eb.js.map