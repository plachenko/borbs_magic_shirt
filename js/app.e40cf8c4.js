(function(e){function t(t){for(var i,s,a=t[0],l=t[1],c=t[2],f=0,p=[];f<a.length;f++)s=a[f],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(i=!1)}i&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},r={app:0},o=[];function s(e){return a.p+"js/"+({about:"about"}[e]||e)+"."+{about:"a43cbcf2"}[e]+".js"}function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=i);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=s(e);var c=new Error;o=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",c.name="ChunkLoadError",c.type=i,c.request=o,n[1](c)}r[e]=void 0}};var f=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(t)},a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var f=0;f<l.length;f++)t(l[f]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"034f":function(e,t,n){"use strict";var i=n("85ec"),r=n.n(i);r.a},"1f7a":function(e,t,n){e.exports=n.p+"img/brush.71f634cc.png"},"4ea7":function(e,t,n){e.exports=n.p+"img/pallet.19fdd25d.png"},"50c2":function(e,t,n){},"702c":function(e,t,n){e.exports=n.p+"img/tip.c870fbfd.png"},8357:function(e,t,n){"use strict";var i=n("f5de"),r=n.n(i);r.a},"85ec":function(e,t,n){},9658:function(e,t,n){"use strict";var i=n("50c2"),r=n.n(i);r.a},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",{ref:"cap",attrs:{id:"cap"}}),i("div",{ref:"brush",attrs:{id:"brush"}},[i("canvas",{ref:"tip",staticStyle:{left:"0px",position:"absolute","z-index":"9994"},attrs:{width:"26",height:"19"}}),i("img",{ref:"tipBG",staticStyle:{left:"0px",position:"absolute","z-index":"9993"},attrs:{src:n("702c"),id:"tip"}}),i("img",{staticStyle:{left:"25px",position:"absolute"},attrs:{src:n("1f7a")}}),i("div",{attrs:{id:"sleeve"}})]),i("div",{attrs:{id:"container"}},[i("div",{attrs:{id:"middle"}},[i("div",{ref:"refImg",attrs:{id:"refImg"}}),i("div",{attrs:{id:"menu"}},[i("a",{attrs:{href:"#"},on:{click:e.save}},[e._v("Save")]),i("a",{attrs:{href:"#"},on:{click:function(t){return e.$refs.paintCan.clearAll()}}},[e._v("Clear")]),i("a",{attrs:{href:"#"},on:{click:function(t){e.timelineShow=!e.timelineShow}}},[e._v("Timeline")]),i("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.load}}),i("a",{staticStyle:{"border-radius":"0px 0px 15px 0px"},attrs:{href:"#"},on:{click:function(t){return e.$refs.file.click()}}},[e._v("Load")]),i("BTimeline",{directives:[{name:"show",rawName:"v-show",value:e.timelineShow,expression:"timelineShow"}]})],1),i("div",{ref:"canContainer",attrs:{id:"canvasContainer"}},[i("img",{staticStyle:{position:"absolute","z-index":"9995"},attrs:{src:n("ea91")}}),i("BCan",{ref:"paintCan",attrs:{id:"paintCan",lineColor:e.lineColor,curPos:e.curPos,color:e.color}})],1),i("div",{attrs:{id:"pallet"}},[i("div",{staticStyle:{"z-index":"9998",position:"absolute",top:"-5px",left:"-100px"},on:{click:e.toggleColor}},[e._v(" Fill "),i("div",{staticClass:"colPrev",class:{cur:"bg"==e.selected}},[i("span",{directives:[{name:"show",rawName:"v-show",value:!e.color,expression:"!color"}],staticClass:"X"},[e._v("X")]),i("div",{style:{backgroundColor:"#"+e.color}})])]),i("div",{staticStyle:{"z-index":"9998",position:"absolute",top:"-5px",right:"-100px"},on:{click:e.toggleLine}},[e._v(" Stroke "),i("div",{staticClass:"colPrev",class:{cur:"line"==e.selected}},[i("span",{directives:[{name:"show",rawName:"v-show",value:!e.lineColor,expression:"!lineColor"}],staticClass:"X"},[e._v("X")]),i("div",{style:{backgroundColor:"#"+e.lineColor}})])]),i("div",{ref:"pallet",staticStyle:{display:"flex",width:"100%",position:"absolute",height:"100%"}},e._l(e.colors,(function(t,n){return i("div",{key:n,staticClass:"palletCol",on:{click:function(n){return e.changeColor(t)}}})})),0),i("img",{ref:"palletImg",attrs:{src:n("4ea7")}})])])])])},o=[],s=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{position:"relative",height:"420px",width:"420px"}},e._l(2,(function(e,t){return n("canvas",{key:t,ref:"can",refInFor:!0,attrs:{width:"420",height:"420"}})})),0)}),a=[],l=(n("cb29"),n("4160"),n("159b"),new i["a"]),c=l,f={name:"BCan",data:function(){return{stroke:[],strokes:[],frames:[],firstPnt:null,frameNum:0,frameEvt:!1}},watch:{curPos:{deep:!0,handler:function(e){this.clearCan(1),(this.color||this.lineColor)&&(e?(this.frameEvt&&(this.stroke=[],console.log(this.stroke),this.frameEvt=!1),this.stroke.push(e)):this.stroke=[])}}},props:{curPos:{type:Object,default:function(){return null}},lineColor:{type:String,default:null},color:{type:String,default:"000000"}},methods:{clearAll:function(){this.frames=[],this.strokes=[],this.clearCan(0)},clearCan:function(e){this.colors=[],this.clear(this.$refs.can[e])},clear:function(e){e.getContext("2d").clearRect(0,0,e.width,e.height)},save:function(){},drawStroke:function(e,t,n,i,r){r&&(e.strokeStyle="#"+r),i&&(e.fillStyle="#"+i),1==t&&(e.globalCompositeOperation="xor"),n&&(e.beginPath(),e.moveTo(n[0].x,n[0].y),n.forEach((function(t,n){e.lineTo(t.x,t.y)})),e.lineWidth=3,i&&(e.fill(),r||e.closePath()),r&&e.stroke())},draw:function(e,t){var n=this.$refs.can[e].getContext("2d");0==e&&this.clearCan(0),this.drawStroke(n,e,t.stroke,t.color,t.lineColor)},drawFrame:function(e){this.frames[e]&&this.draw(0,this.frames[e])},frameChange:function(e){this.frameNum=e,this.clearCan(0),this.clearCan(1),this.drawFrame(e),this.frameEvt=!0}},mounted:function(){c.$on("frameChange",this.frameChange)}},u=f,p=(n("8357"),n("2877")),d=Object(p["a"])(u,s,a,!1,null,"717b0c0c",null),h=d.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("span",{attrs:{id:"playBtn"},on:{click:e.togglePlay}},[e._v(e._s(e.playing?"stop":"play"))]),n("span",{staticStyle:{display:"inline-block","margin-right":"10px"}},[e._v("frame: "+e._s(e.frameNum))]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.frameNum,expression:"frameNum"}],staticStyle:{width:"40px"},attrs:{type:"range",max:e.frameMax},domProps:{value:e.frameNum},on:{__r:function(t){e.frameNum=t.target.value}}}),n("span",{staticStyle:{display:"inline-block",margin:"0px 10px"}},[e._v("speed: "+e._s(e.speed/1e3))]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.speed,expression:"speed"}],staticStyle:{width:"40px"},attrs:{type:"range",max:"1000",min:"10",step:"10"},domProps:{value:e.speed},on:{__r:function(t){e.speed=t.target.value}}})])},v=[],g={name:"BCan",data:function(){return{speed:800,frameNum:0,frameMax:9,playing:!1}},watch:{frameNum:function(e){c.$emit("frameChange",e)}},methods:{tick:function(){var e=this;setTimeout((function(){e.playing&&(window.requestAnimationFrame(e.tick),e.frameNum<e.frameMax?e.frameNum++:e.frameNum=0)}),this.speed)},togglePlay:function(){this.playing=!this.playing,this.playing&&this.startTick()},startTick:function(){window.requestAnimationFrame(this.tick)}},mounted:function(){var e=this;this.$nextTick((function(){e.startTick()}))}},y=g,b=(n("9658"),Object(p["a"])(y,m,v,!1,null,"0af43a84",null)),x=b.exports,w=n("cffa"),C={name:"App",components:{BCan:h,BTimeline:x},data:function(){return{coloring:!1,color:null,lineColor:"000000",selected:"bg",timelineShow:!0,palletShow:!1,refOpen:!1,curPos:null,md:!1,tipImg:null,armShow:!0,colors:["000000","FFFFFF","F2B7D6","E91D3B","FDBC24","45B5F1","A776EE","58E8A4","162770","5A2F1C","F7EB3D","C7C6C7","115011","380E74"]}},watch:{color:function(e){this.tipChange()}},methods:{changeColor:function(e){"bg"==this.selected?this.color=e:"line"==this.selected&&(this.lineColor=e)},toggleColor:function(){"bg"==this.selected&&(this.color?this.color=null:this.color="000000"),this.selected="bg"},toggleLine:function(){"line"==this.selected&&(this.lineColor?this.lineColor=null:this.lineColor="000000"),this.selected="line"},save:function(){},camera:function(){navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){})).catch((function(e){}))},load:function(e){var t=this,n=e.target.files,i=URL.createObjectURL(n[0]),r=0;this.refOpen&&(r=1.5,w["a"].to("#refImg",1,{top:-230})),setTimeout((function(){t.$refs.refImg.style.backgroundImage="url("+i+")"}),1e3*r),w["a"].to("#refImg",1,{top:10,delay:r}),this.refOpen=!0},tipChange:function(){var e=this.$refs.tip.getContext("2d");e.drawImage(this.tipImg,0,0),e.fillStyle="#"+this.color,e.globalCompositeOperation="source-in",e.fillRect(0,0,14,14)}},mounted:function(){var e,t=this;this.$nextTick((function(){t.tipImg=document.getElementById("tip"),t.tipImg.onload=function(){t.tipChange()},t.$refs.canContainer.style.marginTop=window.innerHeight/2-250+"px",e=t.$refs.paintCan.$el.getBoundingClientRect()})),this.$refs.pallet.addEventListener("pointerdown",(function(e){t.$refs.brush.style.bottom="40px"})),this.$refs.pallet.addEventListener("pointerup",(function(e){t.$refs.brush.style.bottom="75px"})),this.$refs.pallet.addEventListener("pointermove",(function(e){t.$refs.brush.style.width=window.innerWidth-e.screenX+"px",e.pressure||(t.$refs.brush.style.left=e.screenX-8+"px")})),this.$refs.cap.addEventListener("pointerup",(function(e){t.md=!1})),this.$refs.cap.addEventListener("pointerdown",(function(e){t.md=!0})),this.$refs.cap.addEventListener("pointermove",(function(n){t.$refs.brush.style.width=window.innerWidth-n.offsetX+"px";var i=n.screenY+"px";if(n.offsetX>e.x-50&&n.offsetX<e.x+e.width+50&&n.offsetY>e.y&&n.offsetY-50<e.y+e.height+20)if(t.md){var r=Math.round(n.offsetX-e.x),o=Math.round(n.offsetY-e.y);t.curPos={x:r,y:o},t.$refs.tipBG.style.top="-4px",t.$refs.tipBG.style.left="6px",t.$refs.tipBG.style.transform="scaleX(-1) rotate(90deg)",t.$refs.tip.style.top="-4px",t.$refs.tip.style.left="6px",t.$refs.tip.style.transform="scaleX(-1) rotate(90deg)"}else t.$refs.tipBG.style.top="0px",t.$refs.tipBG.style.left="0px",t.$refs.tipBG.style.transform="rotate(0deg)",t.$refs.tip.style.top="0px",t.$refs.tip.style.left="0px",t.$refs.tip.style.transform="rotate(0deg)",t.curPos=null;else t.md=!1;n.offsetY>window.innerHeight-80&&!t.palletShow?(t.palletShow=!0,w["a"].to("#pallet",{bottom:-5}),i=n.offsetY-45,t.$refs.brush.style.transform="scaleY(-1)"):n.offsetY<window.innerHeight-79&&(w["a"].to("#pallet",{bottom:-65}),i=n.offsetY,t.$refs.brush.style.transform="scaleY(1)",t.palletShow=!1),t.$refs.brush.style.top=i+"px",t.$refs.brush.style.left=n.offsetX-15+"px"}))}},$=C,k=(n("034f"),Object(p["a"])($,r,o,!1,null,null,null)),S=k.exports,_=n("8c4f"),E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("div",{ref:"hand",staticStyle:{"background-color":"#F00",right:"0px",height:"120px",position:"absolute"}}),n("BCan")],1)},P=[],B={name:"Home",components:{BCan:h},mounted:function(){var e=this;window.addEventListener("mousemove",(function(t){e.$refs.hand.style.width=window.innerWidth-t.offsetX-40+"px",e.$refs.hand.style.top=t.offsetY+"px"}))}},O=B,F=Object(p["a"])(O,E,P,!1,null,null,null),T=F.exports;i["a"].use(_["a"]);var j=[{path:"/",name:"Home",component:T},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],N=new _["a"]({base:"",routes:j}),I=N;i["a"].config.productionTip=!1,new i["a"]({router:I,render:function(e){return e(S)}}).$mount("#app")},ea91:function(e,t,n){e.exports=n.p+"img/canvas.c0fbad0b.png"},f5de:function(e,t,n){}});
//# sourceMappingURL=app.e40cf8c4.js.map